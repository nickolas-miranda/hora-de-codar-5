<html>
<head>
	<script>
		var nome = prompt("Qual é o seu nome?");
		var movimentacoes = []; 
		alert(`Olá ${nome}, é um prazer ter você por aqui!`);
		var saldo = 100.5; 
		var senha = 3589;
		var tentativas = 3;

		while (tentativas > 0) {
			var senha_usuario = parseInt(prompt('Por favor, insira sua senha:'));
			if (senha_usuario === senha) {
				inicio();
				break;
			} else {
				tentativas--;
				if (tentativas > 0) {
					alert('Senha incorreta. Você tem ' + tentativas + ' tentativas restantes.');
				} else {
					alert('Conta bloqueada. Tente novamente mais tarde.');
				}
			}
		}

		function inicio() {
			var escolha = parseInt(prompt(
				nome + ', selecione uma opção\n\n' +
				'1.) Saldo \n2.) Extrato \n3.) Saque \n4.) Depósito \n5.) Transferência \n6.) Sair'
			));

			switch (escolha) {
				case 1:
					ver_saldo();
					break;
				case 2:
					extrato();
					break;
				case 3:
					fazer_saque();
					break;
				case 4:
					fazer_deposito();
					break;
				case 5:
					transferencia();
					break;
				case 6:
					sair();
					break;
				default:
					erro();
					break;
			}
		}

		function ver_saldo() {
			alert('Seu saldo atual é: R$ ' + saldo.toFixed(2));
			inicio();
		}

		function fazer_deposito() {
			var deposito = parseFloat(prompt('Qual o valor para depósito?'));

			if (isNaN(deposito)) {
				alert('Por favor, informe um número.');
				fazer_deposito();
			} else if (deposito <= 0) {
				alert("Operação não autorizada.");
				inicio();
			} else {
				saldo += deposito;
				movimentacoes.push({ tipo: "Depósito", valor: deposito });
				ver_saldo();
			}
		}

		function fazer_saque() {
			var saque = parseFloat(prompt('Qual o valor para saque?'));

			if (isNaN(saque)) {
				alert('Por favor, informe um número.');
				fazer_saque();
			} else if (saque > saldo || saque <= 0) {
				alert("Operação não autorizada.");
				inicio();
			} else {
				saldo -= saque;
				movimentacoes.push({ tipo: "Saque", valor: saque });
				ver_saldo();
			}
		}

		function extrato() {
			if (movimentacoes.length === 0) {
				alert('Nenhuma movimentação registrada!');
				inicio();
				return;
			} else {
				var mensagem = 'Extrato:\n';
				for (var i = 0; i < movimentacoes.length; i++) {
					mensagem += (i + 1) + ' - ' + movimentacoes[i].tipo + ': R$ ' + movimentacoes[i].valor.toFixed(2) + '\n';
				}
				alert(mensagem);
			}
			inicio();
		}

		function transferencia() {
			var valor = parseFloat(prompt('Qual o valor para transferência?'));
			var conta = prompt('Qual o número da conta?');

			if (isNaN(valor)) {
				alert('Por favor, informe um número.');
				transferencia();
			} else if (valor > saldo || valor <= 0) {
				alert("Operação não autorizada.");
				inicio();
			} else {
				saldo -= valor;
				movimentacoes.push({ tipo: `Transferência para conta ${conta}`, valor: valor });
				alert(`Você transferiu R$ ${valor.toFixed(2)} para a conta ${conta}.`);
				ver_saldo();
			}
		}

		function erro() {
			alert('Opção inválida, por favor selecione uma opção válida.');
			inicio();
		}

		function sair() {
			var confirma = confirm('Você deseja sair?');
			if (confirma) {
				alert(`${nome}, foi um prazer ter você por aqui!`);
			} else {
				inicio();
			}
		}
	</script>
</head>
<body>
</body>
</html>
